<!DOCTYPE html><html data-astro-cid-fepk5tcl lang=zh><head><meta charset=UTF-8><title>我的追番</title><link href=/_astro/anime.C7Pl-FQe.css rel=stylesheet><style>body{font-family:Segoe UI,PingFang SC,sans-serif;margin:0;background:#f5f6fa;color:#333}h1[data-astro-cid-fepk5tcl]{text-align:center;margin:2rem 0 1rem;font-size:2rem;font-weight:700}#search[data-astro-cid-fepk5tcl]{display:block;margin:0 auto 1.5rem;padding:.6rem 1rem;width:90%;max-width:350px;border-radius:9999px;border:1px solid #ddd;font-size:1rem;outline:0;transition:.2s}#search[data-astro-cid-fepk5tcl]:focus{border-color:#0078d7;box-shadow:0 0 0 3px #0078d733}.tabs[data-astro-cid-fepk5tcl]{display:flex;justify-content:center;gap:.8rem;margin-bottom:2rem}.tabs[data-astro-cid-fepk5tcl] button[data-astro-cid-fepk5tcl]{padding:.5rem 1.2rem;border:none;border-radius:9999px;background:#e9ecef;cursor:pointer;font-size:.95rem;transition:all .2s}.tabs[data-astro-cid-fepk5tcl] button[data-astro-cid-fepk5tcl]:hover{background:#d0d5da}.tabs[data-astro-cid-fepk5tcl] button[data-astro-cid-fepk5tcl].active{background:#0078d7;color:#fff;font-weight:600;box-shadow:0 2px 6px #0078d766}.grid[data-astro-cid-fepk5tcl]{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:1.5rem;padding:0 1rem 2rem;max-width:1200px;margin:auto}.card[data-astro-cid-fepk5tcl]{background:#fff;border-radius:12px;box-shadow:0 4px 12px #00000014;overflow:hidden;text-align:center;transition:transform .2s,box-shadow .2s}.card[data-astro-cid-fepk5tcl]:hover{transform:translateY(-5px);box-shadow:0 8px 20px #00000026}.card[data-astro-cid-fepk5tcl] img[data-astro-cid-fepk5tcl]{width:100%;aspect-ratio:3/4;-o-object-fit:cover;object-fit:cover}.card[data-astro-cid-fepk5tcl] h3[data-astro-cid-fepk5tcl]{font-size:1rem;margin:.8rem 0 .3rem;padding:0 .5rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.card[data-astro-cid-fepk5tcl] p[data-astro-cid-fepk5tcl]{font-size:.85rem;color:#777;margin-bottom:.8rem}</style></head><body data-astro-cid-fepk5tcl><h1 data-astro-cid-fepk5tcl>📺 我的追番</h1><input data-astro-cid-fepk5tcl id=search placeholder=搜索番剧... type=text><div data-astro-cid-fepk5tcl class=tabs><button data-astro-cid-fepk5tcl id=tab-watching class=active>在看</button> <button data-astro-cid-fepk5tcl id=tab-wish>想看</button> <button data-astro-cid-fepk5tcl id=tab-watched>看过</button></div><div data-astro-cid-fepk5tcl id=tab-content><div data-astro-cid-fepk5tcl class=grid id=content-watching><p data-astro-cid-fepk5tcl>加载中…</p></div><div data-astro-cid-fepk5tcl class=grid id=content-wish style=display:none><p data-astro-cid-fepk5tcl>加载中…</p></div><div data-astro-cid-fepk5tcl class=grid id=content-watched style=display:none><p data-astro-cid-fepk5tcl>加载中…</p></div></div><script type=module>const tabButtons=[document.getElementById("tab-watching"),document.getElementById("tab-wish"),document.getElementById("tab-watched")],tabContents=[document.getElementById("content-watching"),document.getElementById("content-wish"),document.getElementById("content-watched")],searchInput=document.getElementById("search");function filterCards(){const t=searchInput?searchInput.value.toLowerCase():"",e=tabContents.find((t=>t&&"none"!==t.style.display));if(!e)return;e.querySelectorAll(".card").forEach((e=>{const n=e.dataset.name||"";e.style.display=n.includes(t)?"":"none"}))}async function fetchCollectionJS(t){let e=1;let n=[];try{for(;;){const a=await fetch(`https://api.bgm.tv/v0/users/851657/collections?type=${t}&limit=30&offset=${30*(e-1)}`,{headers:{"User-Agent":"AstroBlog/1.0 (https://yourblog.com)"}});if(!a.ok)break;const c=await a.json();if(!c.data||0===c.data.length)break;if(n=n.concat(c.data),c.data.length<30)break;e++}}catch(t){console.error(t)}return n}function renderCards(t,e,n){t&&(e&&0!==e.length?t.innerHTML=e.map((t=>`\n          <div class="card" data-name="${(t.subject.name_cn||t.subject.name).toLowerCase()}">\n            ${t.subject.images?.common?`<a href="https://bgm.tv/subject/${t.subject.id}" target="_blank"><img src="${t.subject.images.common}" alt="${t.subject.name_cn||t.subject.name}" /></a>`:""}\n            <h3>${t.subject.name_cn||t.subject.name}</h3>\n            ${t.subject.date?`<p>${t.subject.date}</p>`:""}\n          </div>\n        `)).join(""):t.innerHTML=`<p>${n}</p>`)}async function init(){const[t,e,n]=await Promise.all([fetchCollectionJS(3),fetchCollectionJS(1),fetchCollectionJS(2)]);renderCards(tabContents[0],t,"目前没有在看的番剧"),renderCards(tabContents[1],e,"目前没有想看的番剧"),renderCards(tabContents[2],n,"目前没有看过的番剧"),filterCards()}tabButtons.forEach(((t,e)=>{t&&t.addEventListener("click",(()=>{tabButtons.forEach((t=>t&&t.classList.remove("active"))),t.classList.add("active"),tabContents.forEach(((t,n)=>t&&(t.style.display=n===e?"":"none"))),filterCards()}))})),searchInput&&searchInput.addEventListener("input",filterCards),init()</script></body></html>