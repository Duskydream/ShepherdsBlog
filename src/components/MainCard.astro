---
import type { PostData } from "@interfaces/data";

export interface MainCardProps extends PostData {
  extraClasses?: string;
}

const {
  title,
  description,
  extraClasses = "",
} = Astro.props as MainCardProps;
---

<article class={`feishu-doc ${extraClasses}`}>
  <header class="doc-header">
    <h1 class="doc-title">{title}</h1>
    {description && <p class="doc-description">{description}</p>}
  </header>

  <div class="doc-content">
    <slot />
  </div>
</article>

<style>
  .feishu-doc {
    @apply max-w-none;
    line-height: 1.7;
  }

  .doc-header {
    @apply mb-6 pb-0;
  }

  .doc-title {
    @apply text-3xl md:text-4xl font-semibold mb-2;
    letter-spacing: -0.01em;
    line-height: 1.25;
  }

  .doc-description {
    @apply text-base text-base-content/60 mt-2;
    line-height: 1.6;
  }

  .doc-content {
    @apply prose prose-lg max-w-none;
  }

  /* 轻量段落间距 */
  .doc-content :global(p) {
    @apply mb-4;
    line-height: 1.7;
  }

  /* 标题节奏 */
  .doc-content :global(h1),
  .doc-content :global(h2),
  .doc-content :global(h3) {
    @apply font-semibold mt-8 mb-4;
    letter-spacing: -0.01em;
  }

  .doc-content :global(h1) {
    @apply text-3xl;
    line-height: 1.3;
  }

  .doc-content :global(h2) {
    @apply text-2xl;
    line-height: 1.4;
  }

  .doc-content :global(h3) {
    @apply text-xl;
    line-height: 1.5;
  }

  /* 列表节奏 */
  .doc-content :global(ul),
  .doc-content :global(ol) {
    @apply my-4 space-y-2;
  }

  .doc-content :global(li) {
    @apply leading-7;
  }

  /* 引用块 */
  .doc-content :global(blockquote) {
    @apply my-6 py-3 px-5 border-l-4 border-primary/40 bg-base-200/30;
    font-style: normal;
  }

  /* 代码块 - 不影响自定义代码块 */
  .doc-content :global(pre:not(.frosti-code pre)) {
    @apply my-6 p-4 bg-base-200 overflow-x-auto;
    border-radius: 8px;
  }

  .doc-content :global(:not(pre) > code) {
    @apply px-2 py-1 bg-base-200 text-base-content font-mono text-sm;
    border-radius: 4px;
  }

  /* 表格 */
  .doc-content :global(table) {
    @apply w-full my-6;
    border-collapse: collapse;
  }

  .doc-content :global(th) {
    @apply bg-base-200 font-semibold text-left py-3 px-4 border-b-2 border-base-300;
  }

  .doc-content :global(td) {
    @apply py-3 px-4 border-b border-base-300;
  }

  .doc-content :global(tr:hover) {
    @apply bg-base-200/50;
  }

  /* Ensure doc-content containers don't clip content */
  .doc-content {
    overflow: visible !important;
  }

  /* Image styling with citation block */
  .doc-content :global(img) {
    /* Gray citation block below each image - like markdown quote */
    &::after {
      content: "" !important;
      display: block !important;
      width: 120% !important;
      height: 16px !important;
      background-color: #e5e7eb !important;
      border: 2px solid #d1d5db !important;
      margin-top: 8px !important;
      border-radius: 4px !important;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
    }
  }
</style>
